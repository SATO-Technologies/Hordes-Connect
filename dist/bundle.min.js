(()=>{"use strict";const t="https://hordesconnect.bysato.com",s=new class{constructor(){this.app="",this.size={width:350,height:600,top:window.innerHeight/2-300,left:window.innerWidth/2-175},this.connected=!1,this.address=null,this.utxos={funds:[],dummies:[]}}initialize({app:t="",size:s}){this.app=t;const{top:e,left:n,width:i,height:o}=s||{};i&&o&&(this.size={width:i,height:o,top:e||(window.innerHeight-o)/2,left:n||(window.innerWidth-i)/2})}getAddress(){return this.isConnected()||console.warn("Hordes Wallet is not connected"),this.address}getUtxos({key:t="funds"}){return this.isConnected()||console.warn("Hordes Wallet is not connected"),this.utxos[t]||[]}isConnected(){return this.connected}open(s={},e){window.open(`${t}?payload=${encodeURIComponent(JSON.stringify(s))}`,"_blank",`toolbar=no,scrollbars=no,resizable=no,top=${this.size.top},left=${this.size.left},width=${this.size.width},height=${this.size.height}}`),window.addEventListener("message",(s=>{(s.originalEvent?.origin||s.origin).includes(t)&&e(JSON.parse(s.data))}))}connect({message:t="Address and list of utxos"}={}){return new Promise((async(s,e)=>{try{this.open({app:this.app,type:"address_utxos",message:t},(t=>{t&&"address_utxos"==t.type&&(this.connected=!0,this.address=t.payload.address,this.utxos=t.payload.utxos,s(!0))}))}catch{e(!1)}}))}signTransaction({message:t="Sign Transaction",base64Psbt:s=null,broadcast:e=!1}){return new Promise((async(n,i)=>{try{this.open({app:this.app,type:"sign_transaction",message:t,base64Psbt:s,broadcast:e},(t=>{t&&"sign_transaction"==t.type&&n(t.payload)}))}catch{i({error:"unable to sign transaction"})}}))}};window.HordesConnect=s})();