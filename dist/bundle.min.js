(()=>{"use strict";const t=()=>navigator.userAgent.match("iPad")||navigator.userAgent.match("iPhone")||navigator.userAgent.match("iPod")||navigator.userAgent.match("Android"),s="https://hordesconnect.bysato.com",i=new class{constructor(){this.app="",this.size={width:t()?window.innerWidth:350,height:t()?window.innerHeight:820,top:t()?0:window.innerHeight/2-410,left:t()?0:window.innerWidth/2-175}}initialize({app:t="",size:s}){this.app=t;const{top:i,left:e,width:n,height:a}=s||{};isNaN(i)||(this.size.top=+i),isNaN(e)||(this.size.left=+e),isNaN(n)||(this.size.width=+n),isNaN(a)||(this.size.height=+a)}open(t={},i){window.open(`${s}?payload=${encodeURIComponent(JSON.stringify(t))}`,"_blank",`toolbar=no,scrollbars=no,resizable=no,top=${this.size.top},left=${this.size.left},width=${this.size.width},height=${this.size.height}}`),window.addEventListener("message",(t=>{(t.originalEvent?.origin||t.origin).includes(s)&&i(JSON.parse(t.data))}))}getAddress({message:t="Address and Utxos"}={}){return new Promise((async(s,i)=>{try{this.open({app:this.app,type:"address_utxos",message:t},(t=>{t&&"address_utxos"==t.type?s(t.payload):s(null)}))}catch{i(null)}}))}signTransaction({message:t="Sign Transaction",base64Psbt:s=null,broadcast:i=!1}){return new Promise((async(e,n)=>{try{this.open({app:this.app,type:"sign_transaction",message:t,base64Psbt:s,broadcast:i},(t=>{t&&"sign_transaction"==t.type&&e(t.payload)}))}catch{n({error:"unable to sign transaction"})}}))}};window.HordesConnect=i})();